<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuevo Movimiento de Inventario</title>
    <link rel="stylesheet" href="movimientos-inventario-new.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>NUEVO MOVIMIENTO DE INVENTARIO</h1>
            <div class="datetime" id="datetime"></div>
        </header>

        <main>
            <!-- SECCI√ìN MAESTRO (Cabecera) -->
            <div class="seccion-maestro">
                <h2>üìã Cabecera del Movimiento</h2>
                
                <div class="form-row">
                    <label>N√∫mero de Movimiento:</label>
                    <input type="text" id="numeroMovimiento" class="input-medium" readonly style="background: #e0e0e0; font-weight: bold; font-size: 18px;">
                    <span class="info-text">Autom√°tico</span>
                </div>

                <div class="form-row">
                    <label>Fecha:</label>
                    <input type="date" id="fecha" class="input-medium">
                    <label class="label-right">Hora:</label>
                    <input type="time" id="hora" class="input-small">
                </div>

                <div class="form-row">
                    <label>Tipo de Movimiento: <span class="required">*</span></label>
                    <select id="tipoMovimiento" class="input-large">
                        <option value="">-- Seleccione tipo --</option>
                    </select>
                    <span id="infoTipo" class="info-text"></span>
                </div>

                <div class="form-row">
                    <label>Observaciones:</label>
                    <textarea id="observaciones" class="input-xlarge" rows="2" placeholder="Observaciones opcionales"></textarea>
                </div>
            </div>

            <!-- SECCI√ìN DETALLE (Art√≠culos) -->
            <div class="seccion-detalle">
                <h2>üì¶ Art√≠culos del Movimiento</h2>
                
                <div class="toolbar-detalle">
                    <button class="btn-agregar" onclick="agregarFila()">
                        <span>‚ûï</span> Agregar Art√≠culo
                    </button>
                    <button class="btn-limpiar-detalle" onclick="limpiarDetalle()">
                        <span>üóëÔ∏è</span> Limpiar Todo
                    </button>
                </div>

                <div class="tabla-detalle-container">
                    <table id="tablaDetalle">
                        <thead>
                            <tr>
                                <th style="width: 40px;">#</th>
                                <th style="width: 150px;">Clave</th>
                                <th style="width: 300px;">Descripci√≥n</th>
                                <th style="width: 120px;">Cantidad</th>
                                <th style="width: 120px;">Precio Unit.</th>
                                <th style="width: 120px;">Total</th>
                                <th style="width: 80px;">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="bodyDetalle">
                            <!-- Las filas se agregan din√°micamente -->
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="5" style="text-align: right; font-weight: bold;">TOTAL:</td>
                                <td id="totalGeneral" style="font-weight: bold; font-size: 16px;">$0.00</td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>

            <!-- BOTONES DE ACCI√ìN -->
            <div class="button-group">
                <button class="btn-guardar" onclick="guardarMovimiento()">
                    <span>üíæ</span> Guardar Movimiento
                </button>
                <button class="btn-cancelar" onclick="cancelar()">
                    <span>‚ùå</span> Cancelar
                </button>
            </div>
        </main>
    </div>

    <!-- Modal de b√∫squeda de art√≠culos -->
    <div id="modalBuscarArticulo" class="modal">
        <div class="modal-content">
            <h2>Buscar Art√≠culo</h2>
            <input type="text" id="inputBuscarArticulo" placeholder="Escriba clave o descripci√≥n">
            <div id="sugerenciasArticulo" class="sugerencias-container"></div>
            <div class="modal-buttons">
                <button class="btn" onclick="cerrarModalArticulo()">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="supabase-config.js"></script>
    <script src="utils-inputs.js"></script>
    <script src="movimientos-inventario-new.js"></script>
</body>
</html>
